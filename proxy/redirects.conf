location ^~ /projects/contribute {
    return 301 /contribute$is_args$args;
}

location = /snapshots {
    return 301 /community/snapshots$is_args$args;
}

location ^~ /snapshots/ {
    # Relative redirect is safe: all HTTP traffic is redirected to HTTPS at the server level
    # (port 80 -> 443) before reaching this location block. Relative redirects preserve
    # the incoming scheme, so HTTPS requests remain HTTPS.
    rewrite ^/snapshots/(.*)$ /community/snapshots/$1 permanent; # NOSEMGREP: generic.nginx.security.insecure-redirect.insecure-redirect
}
